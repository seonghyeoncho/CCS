## 컨테이너 메모리 제한

--memory="할당할 메모리 크기"를 이용해서 컨테이너의 메모리를 제한할 수 있다. 입력할 수 있는 단위는 m, g이며 최소 메모리는 4MB이다. 

컨테이너 내에서 동작하는 프로세스가 컨테이너에 할당된 메모리를 초과하면 컨테이너는 자동으로 종료되므로 애플리케이션에 따라 메모리를 적절하게 할당하는 것이 좋다. 

기본적으로 컨테이너의 SWAP 메모리는 메모리의 2배로 설정되지만 별로도 지정할 수 있다.

`--memory-swap=[swap 크기]`

## 컨테이너의 CPU 제한

### --cpu-shares
컨테이너의 가중치를 설정해 해당 컨테이너가 CPU를 상대적으로 얼마나 사용할 수 있는지를 나타낸다. --cpu-shares 옵션은 상대적인 값을 가진다. 아무런 설정을 하지 않았을 때 컨테이너가 가지는 값은 1024로 CPU 할당에서 1의 비중을 뜻한다.

예를 들어 1024로 설정된 컨테이너와 512로 설정된 컨테이너가 동시에 돌아가고 있다면, 2:1의 비율로 cpu를 사용하게 된다.

### --cpuset-cpu
호스트에 cpu가 여러 개 있을 때 --cpuset-cpu 옵션을 지정해 컨테이너가 특정 cpu만 사용하도록 설정할 수 있다. 

### --cpu-period, --cpu-quota
컨테이너의 CFS 주기는 기본적으로 100ms으로 설정되지만 run 명령어의 옵션 중 --cpu-period와 --cpu-quota로 이 주기를 변결할 수 있다. 
--cpu-period의 값은 기본적으로 100000이다. --cpu-quota는 --cpu-period에 설정된 시간 중 CPU 스케줄링에 얼마나 할당할 것인지를 설정한다. 

```s
docker run -d --name [name] \
--cpu-period=10000 \
--cpu-quota=25000 \
alicek106/stress \
stress --cpu 1
```

위 예시에서 [--cpu-period] / [--cpu-quota]만큼 CPU 시간을 할당받는다. 즉 기본 CPU 성능에 1/4가 된다.
